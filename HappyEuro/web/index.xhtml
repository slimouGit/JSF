<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>HappyEuro</title>
</h:head>
<f:view>

    <h:body>
        <ui:fragment>
            <p:outputLabel id="person" value="Happy Euro  #{happyEuro.currentDate}"/>
        </ui:fragment>

        <h:form>
            <h:panelGrid columns="2" cellpadding="5">
                <p:outputLabel for="bank" value="Kontostand: "/>
                <p:inputText id="bank" value="#{happyEuro.amountBank}">
                    <p:ajax event="keyup" update="bankAmount result"/>
                </p:inputText>

                <p:outputLabel for="type" value="Art:"/>
                <p:selectOneRadio id="type" value="#{happyEuro.type}" unselectable="true">
                    <f:selectItem itemLabel="Einnahme" itemValue="income"/>
                    <f:selectItem itemLabel="Ausgabe" itemValue="outcome"/>
                </p:selectOneRadio>
                <p:outputLabel for="amount" value="Position: "/>
                <p:inputText id="position" value="#{happyEuro.position}"/>
                <p:outputLabel for="amount" value="Betrag: "/>
                <p:inputText id="amount" value="#{happyEuro.amount}"/>
            </h:panelGrid>

            <p:defaultCommand target="confirm"/>
            <p:commandButton id="confirm" update="list" value="Senden" action="#{happyEuro.calculatePosition()}"
                             ajax="false"/>

            <p:separator/>

            <ui:fragment>

                    <p:panel header="Kontostand">
                        <p:outputLabel id="bankAmount" value="#{happyEuro.amountBank}"/>
                    </p:panel>

            </ui:fragment>

            <ui:fragment id="list">

                <ui:fragment rendered="#{not empty happyEuro.income}">
                    <p:panel header="Einnahmen">
                        <p:dataTable var="income" value="#{happyEuro.income}">
                            <p:column headerText="Position" rendered="#{not happyEuro.position.contains('bank')}">
                                <h:outputText value="#{income.position}"/>
                            </p:column>
                            <p:column headerText="Betrag">
                                <h:outputText value="#{income.amount}"/>
                            </p:column>
                        </p:dataTable>
                    </p:panel>
                    <p:outputLabel value="#{happyEuro.amountIncome}"/>
                </ui:fragment>

                <ui:fragment rendered="#{not empty happyEuro.outcome}">
                    <p:panel header="Ausgaben">
                        <p:dataTable var="outcome" value="#{happyEuro.outcome}">
                            <p:column headerText="Position">
                                <h:outputText value="#{outcome.position}"/>
                            </p:column>
                            <p:column headerText="Betrag">
                                <h:outputText value="#{outcome.amount}"/>
                            </p:column>
                        </p:dataTable>
                    </p:panel>
                    <p:outputLabel value="#{happyEuro.amountOutcome}"/>
                </ui:fragment>

                <ui:fragment>
                    <p:panel header="Gesamt">
                        <p:outputLabel id="result" value="#{happyEuro.result}"/>
                    </p:panel>
                </ui:fragment>

            </ui:fragment>
        </h:form>
    </h:body>
</f:view>
</html>
